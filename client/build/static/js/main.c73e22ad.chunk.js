(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,a,t){},141:function(e,a,t){},142:function(e,a,t){},147:function(e,a,t){e.exports=t(250)},229:function(e,a,t){},231:function(e,a,t){},233:function(e,a,t){},236:function(e,a,t){},239:function(e,a,t){},241:function(e,a,t){},250:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(143),c=t.n(l),s=t(12),m=t(6),o=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"m-auto"},r.a.createElement("h1",null,"Welcome")))},i=t(5),u=t(76),d=t(349),p=t(327),E=t(160),b=t(331),f=t(328),v=t(329),h=t(330),g=t(347),N=t(157),y=t(325),x=function(e){return r.a.createElement(g.a,{className:"d-flex ms-auto me-auto col-lg-4",onSubmit:e.onSubmit},r.a.createElement(N.a,{type:"search",placeholder:"Search Product",className:"me-2 search-bar-input","aria-label":"Search",value:e.keyword,onChange:e.onChange}),r.a.createElement(E.a,{variant:"outline-light border border-3 nav-btn",type:"submit"},r.a.createElement(y.a,{color:"white",size:24})))},w=t(251),k=t(350),C=(t(253),function(e){return r.a.createElement(w.a,{show:e.show,onHide:e.onHide,scroll:"true",enforceFocus:"true"},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,"Category")),r.a.createElement(w.a.Body,null,r.a.createElement(k.a,{variant:"flush"},["Rice","Noodles","Oil","Sauce","Spice"].map(function(e,a){return r.a.createElement(k.a.Item,{className:"px-2",key:a,action:!0,href:"/product/category/".concat(e.toLowerCase())},e)}))))}),O=t(346),S=t(326),I=t(2),j=t(19),P=Object(n.createContext)(),B={cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]},userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null},T=function(e,a){switch(a.type){case"CART_ADD_ITEM":return localStorage.setItem("cartItems",JSON.stringify([].concat(Object(j.a)(e.cart.cartItems),[a.payload]))),Object(I.a)({},e,{cart:Object(I.a)({},e.cart,{cartItems:[].concat(Object(j.a)(e.cart.cartItems),[a.payload])})});case"CART_REMOVE_ITEM":var t=e.cart.cartItems.filter(function(e,t){return t!==a.payload});return localStorage.setItem("cartItems",JSON.stringify(t)),Object(I.a)({},e,{cart:Object(I.a)({},e.cart,{cartItems:t})});case"CART_UPDATE_ITEM":var n=e.cart.cartItems.slice();return n[a.payload.key].quantity=a.payload.newQuantity,localStorage.setItem("cartItems",JSON.stringify(n)),Object(I.a)({},e,{cart:Object(I.a)({},e.cart,{cartItems:n})});case"CART_CLEAR":return Object(I.a)({},e,{cart:Object(I.a)({},e.cart,{cartItems:[]})});case"USER_SIGNIN":return Object(I.a)({},e,{userInfo:a.payload});case"USER_SIGNOUT":return Object(I.a)({},e,{userInfo:null,cart:{cartItems:[]}});default:return e}},_=function(e){var a=Object(n.useReducer)(T,B),t=Object(i.a)(a,2),l={state:t[0],dispatch:t[1]};return r.a.createElement(P.Provider,{value:l},e.children)},L=function(){var e=Object(m.g)(),a=Object(n.useContext)(P),t=a.state,l=a.dispatch,c=t.userInfo;return r.a.createElement(O.a,{align:"end"},r.a.createElement(O.a.Toggle,{variant:"outline-light border border-3 nav-btn",id:"account-submenu"},r.a.createElement(S.a,{color:"white",size:24,className:"align-bottom"}),r.a.createElement("span",{id:"acc-text",className:"px-1 fw-bold"},"Account")),r.a.createElement(O.a.Menu,null,null!==c?r.a.createElement(O.a.Item,{className:"text-primary"},"Hi, ",c.username):r.a.createElement(O.a.Item,{href:"/user/login",className:"dropdown-item text-primary"},"Login"),r.a.createElement(O.a.Divider,null),null===c&&r.a.createElement(O.a.Item,{href:"/user/register",className:"dropdown-item text-danger"},"Register"),null!==c&&r.a.createElement(O.a.Item,{href:"/user/modify-password",className:"dropdown-item"},"Modify Password"),null!==c&&!c.isAdmin&&r.a.createElement(O.a.Item,{href:"/order",className:"dropdown-item"},"My Order"),null!==c&&!0===c.isAdmin&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a.Item,{href:"/product/manage",className:"dropdown-item"},"Manage Product"),r.a.createElement(O.a.Item,{href:"/order",className:"dropdown-item"},"Manage Order")),null!==c&&r.a.createElement(O.a.Divider,null),null!==c&&r.a.createElement(O.a.Item,{onClick:function(){return l({type:"USER_SIGNOUT"}),localStorage.removeItem("userInfo"),localStorage.removeItem("cart"),void e("/success")},className:"dropdown-item text-danger"},"Logout")))},A=(t(255),function(){var e=Object(n.useContext)(P).state.cart,a=Object(u.useMediaQuery)({query:"(max-width: 600px)"}),t=Object(u.useMediaQuery)({query:"(max-width: 400px)"}),l=Object(n.useState)(!1),c=Object(i.a)(l,2),o=c[0],g=c[1],N=Object(n.useState)(""),y=Object(i.a)(N,2),w=y[0],k=y[1],O=Object(m.g)(),S=function(e){k(e.target.value)},I=function(e){e.preventDefault(),""!==w?(O("/product/search/".concat(w)),k("")):alert("Please enter keywords")};return r.a.createElement(d.a,{bg:"danger",variant:"dark",expand:"lg",className:"px-2 sticky-top",id:"navbar"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(E.a,{variant:"outline-light border border-3 nav-btn",onClick:function(){return g(!0)}},r.a.createElement(f.a,{color:"white",size:24,className:"align-bottom"}),r.a.createElement("strong",{id:"menu-text",className:"px-1"},"Menu")),r.a.createElement(C,{show:o,onHide:function(){return g(!1)}}),t?r.a.createElement(s.b,{to:"/"},r.a.createElement(E.a,{variant:"outline-light border border-3 nav-btn me-auto",className:"mx-2"},r.a.createElement(v.a,{color:"white",size:24,className:"align-bottom"}))):r.a.createElement(s.b,{to:"/",className:a?"me-auto mx-3 fw-bold navbar-brand":"mx-3 fw-bold navbar-brand"},"E-Shop"),!a&&r.a.createElement(x,{onSubmit:I,keyword:w,onChange:S}),r.a.createElement(s.b,{to:"/cart"},r.a.createElement(E.a,{variant:"outline-light border border-3 nav-btn",className:"mx-2 pe-0"},r.a.createElement(h.a,{color:"white",size:24,className:"align-bottom"}),r.a.createElement(b.a,{pill:!0,className:"bg-warning counter"},r.a.createElement("span",{className:"text-black"},e.cartItems.length)),r.a.createElement("span",{id:"cart-text",className:"pe-3 fw-bold"},"Cart"))),r.a.createElement(L,null),a&&r.a.createElement("div",{className:"w-100 mt-2"},r.a.createElement(x,{onSubmit:I,keyword:w,onChange:S}))))}),G=t(332),D=(t(257),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"nav justify-content-center border-bottom mx-5"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/",className:"nav-link px-3 py-0 my-3 text-white border-end border-white"},"ABOUT US")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/",className:"nav-link px-3 py-0 my-3 text-white border-end border-white"},"POLICY")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/",className:"nav-link px-3 py-0 my-3 text-white border-end border-white"},"FAQs")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/",className:"nav-link px-3 py-0 my-3 text-white border-end border-white"},"CONTACT")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/",className:"nav-link px-3 py-0 my-3 text-white"},"JOIN US"))))}),M=t(348),F=(t(259),function(){return r.a.createElement(M.a,{flush:!0},r.a.createElement(M.a.Item,{eventKey:"0"},r.a.createElement(M.a.Header,{id:"collapse-footer"},"More about E-Shop"),r.a.createElement(M.a.Body,null,r.a.createElement(k.a,{variant:"flush",className:"border-0"},r.a.createElement("a",{href:"/",className:"list-group-item list-group-item-action"},"ABOUT US"),r.a.createElement("a",{href:"/",className:"list-group-item list-group-item-action"},"POLICY"),r.a.createElement("a",{href:"/",className:"list-group-item list-group-item-action"},"FAQs"),r.a.createElement("a",{href:"/",className:"list-group-item list-group-item-action"},"CONTACT"),r.a.createElement("a",{href:"/",className:"list-group-item list-group-item-action"},"JOIN US")))))}),R=function(){var e=Object(u.useMediaQuery)({query:"(max-width: 600px)"});return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:"bg-danger"},e?r.a.createElement(F,null):r.a.createElement(D,null),r.a.createElement("div",{className:"text-center text-white py-2"},"\xa9 2022 Copyright: David Wong",r.a.createElement("a",{href:"https://github.com/davidwong1358",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(G.a,{size:24,color:"white",className:"align-bottom mx-2"})))))},q=t(333),U=function(){var e=Object(n.useState)(!1),a=Object(i.a)(e,2),t=a[0],l=a[1];return setTimeout(function(){return l(!0)},2e3),t?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"m-auto row justify-content-center"},r.a.createElement(q.a,{size:96,className:"text-success mb-3 animate__animated animate__flipInX animate__fast"}),r.a.createElement("h1",{className:"text-center"},"Success!"),r.a.createElement(s.b,{to:"/",className:"px-3 text-center"},"Redirect to home after 2 seconds. Click here if not response"))},z=t(334),H=function(){var e=Object(n.useState)(!1),a=Object(i.a)(e,2),t=a[0],l=a[1];return setTimeout(function(){return l(!0)},2e3),t?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"m-auto row justify-content-center"},r.a.createElement(z.a,{size:96,className:"text-danger mb-3 animate__animated animate__flipInX animate__fast"}),r.a.createElement("h1",{className:"text-center"},"Page doesn't exist"),r.a.createElement(s.b,{to:"/",className:"px-3 text-center"},"Redirect to home after 2 seconds. Click here if not response"))},V=t(9),$=t.n(V),Y=t(16),J=t(15),Q=t(34),K=t(159),W=t(337),X=t(10),Z=t(335),ee=t(336),ae=function(e){return r.a.createElement(E.a,{id:e.id,className:"border-0 bg-transparent toggle-password",onClick:function(){return e.onToggle(e.name)}},!e.showPassword&&r.a.createElement(Z.a,{color:"black",size:24}),e.showPassword&&r.a.createElement(ee.a,{color:"black",size:24}))},te=t(14),ne=t.n(te),re=(t(229),X.d().shape({email:X.f().email("Please enter proper email address").required("Please enter username or email."),password:X.f().required("Please enter password.")})),le={email:"",password:""},ce=function(){var e=Object(n.useState)({passwordBtn:!1}),a=Object(i.a)(e,2),t=a[0],l=a[1],c=function(e){l(function(a){return Object(I.a)({},a,Object(J.a)({},e,!a[e]))})},o=Object(n.useContext)(P),u=o.state,d=o.dispatch,p=u.userInfo,b=Object(m.g)(),f=Object(m.f)().search,v=new URLSearchParams(f).get("redirect"),h=v||"/";return Object(n.useEffect)(function(){p&&b(h)},[b,h,p]),r.a.createElement("div",{id:"login-form",className:"form-signin"},r.a.createElement(Q.b,{initialValues:le,validationSchema:re,onSubmit:function(){var e=Object(Y.a)($.a.mark(function e(a){var t,n;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.post("/api/users/login",a);case 3:t=e.sent,n=t.data,d({type:"USER_SIGNIN",payload:n}),localStorage.setItem("userInfo",JSON.stringify(n)),b("/success"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(a){return e.apply(this,arguments)}}()},function(e){var a=e.values,n=e.errors,l=e.touched,m=e.handleSubmit,o=e.handleChange,i=e.handleBlur;return r.a.createElement(g.a,{onSubmit:m},r.a.createElement("h1",{className:"fs-2 fw-bold mb-4 text-center py-2"},"Login"),r.a.createElement(K.a,{controlId:"inputEmail",label:"Email Address"},r.a.createElement(g.a.Control,{type:"email",placeholder:"Email Address",name:"email",value:a.email,onChange:o,onBlur:i,isInvalid:l.email&&!!n.email}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.email)),r.a.createElement(W.a,null,r.a.createElement(K.a,{controlId:"inputPassword",label:"Password",className:"col-12 "},r.a.createElement(g.a.Control,{type:t.passwordBtn?"text":"password",placeholder:"Password",className:"pe-5",name:"password",value:a.password,onChange:o,onBlur:i,isInvalid:l.password&&!!n.password}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.password)),r.a.createElement(ae,{id:"toggle-password",name:"passwordBtn",onToggle:c,showPassword:t.passwordBtn})),r.a.createElement("div",{className:"d-flex justify-content-between mt-4"},r.a.createElement(s.b,{to:"/user/register",className:"me-auto"},r.a.createElement(E.a,{variant:"btn btn-link ps-0"},"Register")),r.a.createElement(s.b,{to:"/user/modify-password"},r.a.createElement(E.a,{variant:"btn btn-link mx-2"},"Forgot Password")),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")))}))},se=(t(231),X.d().shape({username:X.f().max(20,"Maximum 20 character").min(6,"Minimun 6 characters.").matches(/^[\w+-]{6,20}$/,"Only letters, numbers hyphen (-) & underscore ( _ ) is allowed.").required("Please enter username"),email:X.f().email("Invalid email address").required("Email is required!"),confirmEmail:X.f().oneOf([X.e("email"),null],"Email must be match").required("Please confirm email."),password:X.f().max(20,"Maximum 20 character").min(6,"Minimum 6 characters.").required("Password is required"),confirmPassword:X.f().oneOf([X.e("password"),null],"Password must be match").required("Please confirm password.")})),me={username:"",email:"",confirmEmail:"",password:"",confirmPassword:""},oe=function(){var e=Object(n.useState)({passwordBtn:!1,confirmPwBtn:!1}),a=Object(i.a)(e,2),t=a[0],l=a[1],c=function(e){l(function(a){return Object(I.a)({},a,Object(J.a)({},e,!a[e]))})},o=Object(m.g)();return r.a.createElement("div",{id:"reg-form-container",className:"p-5 container justify-content-center"},r.a.createElement(Q.b,{initialValues:me,validationSchema:se,onSubmit:function(){var e=Object(Y.a)($.a.mark(function e(a){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.post("/api/users/register",a);case 3:e.sent.data,o("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(JSON.stringify(e.t0,null,2));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a){return e.apply(this,arguments)}}()},function(e){var a=e.values,n=e.errors,l=e.touched,m=e.handleSubmit,o=e.handleChange,i=e.handleBlur;return r.a.createElement(g.a,{onSubmit:m},r.a.createElement("h1",{className:"fs-2 fw-bold mb-4 text-center py-2"},"Register"),r.a.createElement(K.a,{controlId:"input-user",label:"Username",className:"mb-2"},r.a.createElement(g.a.Control,{type:"text",placeholder:"Username",name:"username",value:a.username,onChange:o,onBlur:i,isInvalid:l.username&&!!n.username}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.username)),r.a.createElement(K.a,{controlId:"input-email",label:"Email",className:"mb-2"},r.a.createElement(g.a.Control,{type:"email",placeholder:"Email",name:"email",value:a.email,onChange:o,onBlur:i,isInvalid:l.email&&!!n.email}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.email)),r.a.createElement(K.a,{controlId:"input-confirm-email",label:"Confirm Email",className:"mb-2"},r.a.createElement(g.a.Control,{autoComplete:"off",type:"email",placeholder:"Confirm Email",name:"confirmEmail",value:a.confirmEmail,onChange:o,onBlur:i,isInvalid:l.confirmEmail&&!!n.confirmEmail}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.confirmEmail)),r.a.createElement(W.a,{className:"mb-2"},r.a.createElement(K.a,{controlId:"input-password",label:"Password",className:"col-12"},r.a.createElement(g.a.Control,{type:t.passwordBtn?"text":"password",placeholder:"Password",name:"password",value:a.password,onChange:o,onBlur:i,isInvalid:l.password&&!!n.password}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.password)),r.a.createElement(ae,{id:"toggle-pw-btn-1",name:"passwordBtn",onToggle:c,showPassword:t.passwordBtn})),r.a.createElement(W.a,{className:"mb-2"},r.a.createElement(K.a,{controlId:"input-confirm-pw",label:"Confirm Password",className:"col-12"},r.a.createElement(g.a.Control,{type:t.confirmPwBtn?"text":"password",placeholder:"Confirm Password",name:"confirmPassword",value:a.confirmPassword,onChange:o,onBlur:i,isInvalid:l.confirmPassword&&!!n.confirmPassword}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.confirmPassword)),r.a.createElement(ae,{id:"toggle-pw-btn-2",name:"confirmPwBtn",onToggle:c,showPassword:t.confirmPwBtn})),r.a.createElement("div",{className:"d-flex justify-content-between mt-4"},r.a.createElement(s.b,{to:"/user/login"},r.a.createElement(E.a,{variant:"btn btn-link ps-0"},"Login")),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")))}))},ie=(t(233),{email:"",password:"",confirmPassword:""}),ue=X.d().shape({email:X.f().email("Please enter proper email.").required("Please enter your email."),password:X.f().max(20,"Maximum 20 character").min(6,"Minimum 6 characters.").required("Password is required"),confirmPassword:X.f().oneOf([X.e("password"),null],"Password must be match").required("Please confirm password.")}),de=function(){var e=Object(n.useState)({newPwBtn:!1,confirmNewPwBtn:!1}),a=Object(i.a)(e,2),t=a[0],l=a[1],c=function(e){l(function(a){return Object(I.a)({},a,Object(J.a)({},e,!a[e]))})},s=Object(m.g)();return r.a.createElement("div",{id:"password-form",className:"p-5 container justify-content-center"},r.a.createElement(Q.b,{initialValues:ie,validationSchema:ue,onSubmit:function(){var e=Object(Y.a)($.a.mark(function e(a){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.put("/api/users/".concat(a.email),{password:a.password});case 3:e.sent.data,s("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(JSON.stringify(e.t0,null,2));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a){return e.apply(this,arguments)}}()},function(e){var a=e.values,n=e.errors,l=e.touched,s=e.handleSubmit,m=e.handleChange,o=e.handleBlur;return r.a.createElement(g.a,{onSubmit:s},r.a.createElement("h1",{className:"fs-2 fw-bold mb-3 text-center py-2"},"Modify Password"),r.a.createElement(W.a,{className:"mb-3"},r.a.createElement(g.a.Group,{controlId:"user",className:"col-12"},r.a.createElement(g.a.Label,null,"Email address"),r.a.createElement(g.a.Control,{type:"email",placeholder:"Email Address",name:"email",value:a.email,onChange:m,onBlur:o,isInvalid:l.email&&!!n.email}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.email))),r.a.createElement(W.a,{className:"mb-3"},r.a.createElement(g.a.Group,{controlId:"new-password",label:"Password",className:"col-12"},r.a.createElement(g.a.Label,null,"New Password"),r.a.createElement(g.a.Control,{type:t.newPwBtn?"text":"password",placeholder:"New Password",name:"password",value:a.password,onChange:m,onBlur:o,isInvalid:l.password&&!!n.password}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.password)),r.a.createElement(ae,{id:"toggle-new-pw-btn-1",name:"newPwBtn",onToggle:c,showPassword:t.newPwBtn})),r.a.createElement(W.a,{className:"mb-3"},r.a.createElement(g.a.Group,{className:"col-12"},r.a.createElement(g.a.Label,null,"Confirm Password"),r.a.createElement(g.a.Control,{type:t.confirmNewPwBtn?"text":"password",placeholder:"Confirm Password",name:"confirmPassword",value:a.confirmPassword,onChange:m,onBlur:o,isInvalid:l.confirmPassword&&!!n.confirmPassword}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.confirmPassword)),r.a.createElement(ae,{id:"toggle-new-pw-btn-2",name:"confirmNewPwBtn",onToggle:c,showPassword:t.confirmNewPwBtn})),r.a.createElement(E.a,{type:"submit",className:"float-end mt-3 w-100"},"Submit"))}))},pe=t(338),Ee=t(158),be=t(339),fe=t(340),ve=t(341),he=(t(140),function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)("code"),m=Object(i.a)(c,2),o=m[0],u=m[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),f=b[0],v=b[1],h=Object(n.useContext)(P),N=h.state,y=(h.dispatch,N.userInfo),x="/api/products/?".concat("title"===o?"search":o,"=").concat(f);Object(n.useEffect)(function(){!function(){var e=Object(Y.a)($.a.mark(function e(){var a;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.get(x);case 3:a=e.sent,l(a.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}()()},[]);var w=function(e){v(e.target.value)},k=function(){var e=Object(Y.a)($.a.mark(function e(a){var t;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,ne.a.get(x);case 4:t=e.sent,l(t.data),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}},e,null,[[1,8]])}));return function(a){return e.apply(this,arguments)}}(),C=function(){var e=Object(Y.a)($.a.mark(function e(a){var t;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure to delete?")){e.next=13;break}return e.prev=1,e.next=4,ne.a.delete("/api/products/".concat(a),{headers:{token:"Bearer ".concat(y.accessToken)}});case 4:return e.sent,e.next=7,ne.a.get(x);case 7:t=e.sent,l(t.data),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}},e,null,[[1,11]])}));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(p.a,{id:"manage-prod-container",className:"mt-4"},r.a.createElement("h1",{className:"text-center mb-3"},"Manage Product"),r.a.createElement(pe.a,{className:"mx-1 mb-3"},r.a.createElement(Ee.a,{md:"9"},r.a.createElement(g.a,{className:"d-flex flex-wrap",onSubmit:k},r.a.createElement(g.a.Group,{as:Ee.a,xs:"2",id:"search-term",className:"me-2"},r.a.createElement(g.a.Select,{"aria-label":"Search Term",value:o,onChange:function(e){u(e.target.value),"category"===e.target.value?v("Any"):v("")}},r.a.createElement("option",{value:"code"},"Code"),r.a.createElement("option",{value:"title"},"Title"),r.a.createElement("option",{value:"category"},"Category"))),"category"!==o?r.a.createElement(g.a.Group,{as:Ee.a,className:"me-2"},r.a.createElement(g.a.Control,{type:"text",placeholder:"Search Keyword",value:f,onChange:w})):r.a.createElement(g.a.Group,{as:Ee.a,className:"me-2"},r.a.createElement(g.a.Select,{"aria-label":"category",name:"category",value:f,onChange:w},r.a.createElement("option",{value:"Any"},"Any"),r.a.createElement("option",{value:"Rice"},"Rice"),r.a.createElement("option",{value:"Noodles"},"Noodles"),r.a.createElement("option",{value:"Oil"},"Oil"),r.a.createElement("option",{value:"Sauce"},"Sauce"),r.a.createElement("option",{value:"Spice"},"Spice"))),r.a.createElement(Ee.a,{xs:"12",sm:"2"},r.a.createElement(E.a,{className:"term-search-btn float-end float-md-start mt-2 mt-sm-0",type:"submit"},"Search")))),r.a.createElement(Ee.a,{xs:{order:"first"},md:{order:"last",span:3}},r.a.createElement(s.b,{to:"/product/create",className:"float-end mb-2 mb-md-2"},r.a.createElement(E.a,{variant:"primary"},r.a.createElement(be.a,{color:"white",size:16,className:"align-middle"}),r.a.createElement("span",{className:"px-1 fw-bold"},"Create"))))),t!==[]&&t.map(function(e,a){return r.a.createElement(pe.a,{className:"border mb-3 mx-1 py-2",key:e._id},r.a.createElement("div",null,r.a.createElement("u",null,"id: ".concat(e._id||a))),r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:2,sm:1,className:"my-1"},r.a.createElement("strong",null,e.code)),r.a.createElement(Ee.a,{xs:!0,className:"my-1 px-4"},r.a.createElement(s.b,{to:"/product/item/".concat(e._id)},r.a.createElement("strong",null,e.title))),r.a.createElement(Ee.a,{xs:3,sm:2,className:"my-1"},r.a.createElement("strong",null,e.category)),r.a.createElement(Ee.a,{sm:5,md:3,className:"d-flex justify-content-around px-0"},r.a.createElement(s.b,{to:"/product/edit/".concat(e._id)},r.a.createElement(E.a,{size:"sm",variant:"secondary"},r.a.createElement(fe.a,{color:"white",size:16,className:"align-middle"}),r.a.createElement("span",{className:"px-1 fw-bold"},"Edit"))),r.a.createElement("div",null,r.a.createElement(E.a,{size:"sm",variant:"danger",onClick:function(){return C(e._id)}},r.a.createElement(ve.a,{color:"white",size:16,className:"align-middle"}),r.a.createElement("span",{className:"px-1 fw-bold"},"Delete"))))))}))}),ge=X.d().shape({code:X.f().required("Product code is missing."),title:X.f().required("Product title is missing."),sku:X.a().of(X.d().shape({itemName:X.f().required("Item name is missing."),price:X.c().min(0,"Number must be 0 or positive.").required("Price is missing"),inStock:X.c().min(0,"Number must be 0 or positive.").required("Stock number is missing."),discount:X.c().min(0,"Number must be 0 or positive.").max(100,"Number must below or at 100.").required("Discount value is missing")})).min(1,"At least 1 item is required.")}),Ne=function(e){return r.a.createElement(Q.b,{initialValues:e.initialize,validationSchema:ge,onSubmit:function(a){e.onSubmit(a)}},function(a){var t=a.values,n=a.errors,l=a.touched,c=a.handleSubmit,s=a.handleChange,m=a.handleBlur;return r.a.createElement(g.a,{onSubmit:c},r.a.createElement(pe.a,{className:"g-3 mb-3"},r.a.createElement(g.a.Group,{as:Ee.a,md:"2",className:"position-relative"},r.a.createElement(g.a.Label,null,"Code"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Code",name:"code",value:t.code,onChange:s,onBlur:m,isInvalid:l.code&&!!n.code}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.code)),r.a.createElement(g.a.Group,{as:Ee.a,md:"2"},r.a.createElement(g.a.Label,null,"Category"),r.a.createElement(g.a.Select,{"aria-label":"Search Term",name:"category",value:t.category,onChange:s},r.a.createElement("option",{value:"Rice"},"Rice"),r.a.createElement("option",{value:"Noodles"},"Noodles"),r.a.createElement("option",{value:"Oil"},"Oil"),r.a.createElement("option",{value:"Sauce"},"Sauce"),r.a.createElement("option",{value:"Spice"},"Spice"))),r.a.createElement(g.a.Group,{as:Ee.a,md:"8",className:"position-relative"},r.a.createElement(g.a.Label,null,"Product Title"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Product Title",name:"title",value:t.title,onChange:s,onBlur:m,isInvalid:l.title&&!!n.title}),r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.title))),r.a.createElement(g.a.Group,{className:"mb-3"},r.a.createElement(g.a.Label,null,"Cover Image URL"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Cover Image URL",name:"coverImg",value:t.coverImg,onChange:s})),r.a.createElement(g.a.Group,{className:"mb-3"},r.a.createElement(g.a.Label,null,"Product Description"),r.a.createElement(g.a.Control,{as:"textarea",rows:4,name:"description",value:t.description,onChange:s,maxLength:"500"}),r.a.createElement(g.a.Text,{className:"text-secondary"},"Remaining Characters: ".concat(500-t.description.length))),r.a.createElement("hr",null),r.a.createElement("div",{className:"my-3"},r.a.createElement(Q.a,{name:"sku",render:function(e){var a=e.remove,c=e.push;return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h2",null,"Items (Max 5 items)"),r.a.createElement(E.a,{variant:"primary",onClick:function(){return t.sku.length<5?c({itemName:"",price:0,unit:"",inStock:0,img:"",discount:0}):null}},r.a.createElement(be.a,{color:"white",size:16,className:"align-middle"}),r.a.createElement("span",{className:"px-1 fw-bold"},"Create"))),t.sku.length>0&&t.sku.map(function(e,c){return r.a.createElement("div",{className:"mt-3 mb-4 p-3 border rounded",key:c},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h6",{className:"fw-bold"},"Item ",c+1),r.a.createElement(E.a,{size:"sm",variant:"danger",onClick:function(){return t.sku.length>1?a(c):null}},r.a.createElement(ve.a,{color:"white",size:16,className:"align-middle"}),r.a.createElement("span",{className:"px-1 fw-bold"},"Delete"))),r.a.createElement(g.a.Group,{className:"mb-3 position-relative"},r.a.createElement(g.a.Label,null,"Item Title"),r.a.createElement(g.a.Control,{type:"text",name:"sku[".concat(c,"].itemName"),value:t.sku[c].itemName,onChange:s,onBlur:m,isInvalid:n.sku&&n.sku[c]&&n.sku[c].itemName&&l.sku&&l.sku[c].itemName}),n.sku&&n.sku[c]&&n.sku[c].itemName&&l.sku&&l.sku[c].itemName&&r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.sku[c].itemName)),r.a.createElement(g.a.Group,{className:"mb-3"},r.a.createElement(g.a.Label,null,"Image URL"),r.a.createElement(g.a.Control,{type:"text",name:"sku[".concat(c,"].img"),value:t.sku[c].img,onChange:s})),r.a.createElement(pe.a,null,r.a.createElement(g.a.Group,{as:Ee.a,xs:"6",md:"3",className:"mb-3 position-relative"},r.a.createElement(g.a.Label,null,"Price"),r.a.createElement(g.a.Control,{type:"number",min:"0",step:"0.1",name:"sku[".concat(c,"].price"),value:t.sku[c].price,onChange:s,onBlur:m,isInvalid:n.sku&&n.sku[c]&&n.sku[c].price&&l.sku&&l.sku[c].price}),n.sku&&n.sku[c]&&n.sku[c].price&&l.sku&&l.sku[c].price&&r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.sku[c].price)),r.a.createElement(g.a.Group,{as:Ee.a,xs:"6",md:"3",className:"mb-3"},r.a.createElement(g.a.Label,null,"Unit"),r.a.createElement(g.a.Select,{"aria-label":"Unit",name:"sku[".concat(c,"].unit"),value:t.sku[c].unit,onChange:s},r.a.createElement("option",{value:"Box(es)"},"Box(es)"),r.a.createElement("option",{value:"Bag(s)"},"Bag(s)"),r.a.createElement("option",{value:"Bucket(s)"},"Bucket(s)"),r.a.createElement("option",{value:"Piece(s)"},"Piece(s)"),r.a.createElement("option",{value:"Pack(s)"},"Pack(s)"),r.a.createElement("option",{value:"Bottle(s)"},"Bottle(s)"))),r.a.createElement(g.a.Group,{as:Ee.a,xs:"6",md:"3",className:"mb-3 position-relative"},r.a.createElement(g.a.Label,null,"Discount% Off"),r.a.createElement(g.a.Control,{type:"number",min:"0",max:"100",name:"sku[".concat(c,"].discount"),value:t.sku[c].discount,onChange:s,onBlur:m,isInvalid:n.sku&&n.sku[c]&&n.sku[c].discount&&l.sku&&l.sku[c].discount}),n.sku&&n.sku[c]&&n.sku[c].discount&&l.sku&&l.sku[c].discount&&r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.sku[c].discount)),r.a.createElement(g.a.Group,{as:Ee.a,xs:"6",md:"3",className:"mb-3 position-relative"},r.a.createElement(g.a.Label,null,"In Stock"),r.a.createElement(g.a.Control,{type:"number",min:"0",name:"sku[".concat(c,"].inStock"),value:t.sku[c].inStock,onChange:s,onBlur:m,isInvalid:n.sku&&n.sku[c]&&n.sku[c].inStock&&l.sku&&l.sku[c].inStock}),n.sku&&n.sku[c]&&n.sku[c].inStock&&l.sku&&l.sku[c].inStock&&r.a.createElement(g.a.Control.Feedback,{type:"invalid",tooltip:!0},r.a.createElement(z.a,{className:"me-2"}),n.sku[c].inStock))))}))}})),r.a.createElement(E.a,{type:"submit",className:"float-end w-100"},e.formFor," Product"))})},ye=function(){var e=Object(m.h)().pid,a=Object(n.useContext)(P),t=a.state,l=(a.dispatch,t.userInfo),c=Object(n.useState)({}),s=Object(i.a)(c,2),o=s[0],u=s[1],d=Object(m.g)();Object(n.useEffect)(function(){!function(){var a=Object(Y.a)($.a.mark(function a(){var t;return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.get("/api/products/find/".concat(e));case 3:null===(t=a.sent)?d("/error"):(u(t.data),console.log(t)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),d("/error");case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(){return a.apply(this,arguments)}}()()},[e]);var E={code:o.code,title:o.title,description:o.description,coverImg:o.coverImg,category:o.category,sku:o.sku},b=function(){var a=Object(Y.a)($.a.mark(function a(t){return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.put("/api/products/".concat(e),t,{headers:{token:"Bearer ".concat(l.accessToken)}});case 3:a.sent.data,alert("Update Success"),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),alert(JSON.stringify(a.t0,null,2)),console.log(a.t0);case 12:case"end":return a.stop()}},a,null,[[0,8]])}));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(p.a,{id:"edit-prod-form",className:"mb-5"},r.a.createElement("div",{className:"py-4 text-center"},r.a.createElement("h1",null,"Edit Product")),o.hasOwnProperty("code")&&r.a.createElement(pe.a,{className:"g-5"},r.a.createElement(Ne,{initialize:E,formFor:"Edit",onSubmit:b})))},xe={code:"",title:"",description:"",coverImg:"",category:"Rice",sku:[{itemName:"",price:0,unit:"Box(es)",inStock:0,img:"",discount:0}]},we=function(){var e=Object(n.useContext)(P),a=e.state,t=(e.dispatch,a.userInfo),l=Object(m.g)(),c=function(){var e=Object(Y.a)($.a.mark(function e(a){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.post("/api/products",a,{headers:{token:"Bearer ".concat(t.accessToken)}});case 3:e.sent.data,l("/product/manage"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert(JSON.stringify(e.t0,null,2)),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(p.a,{id:"create-prod-form",className:"mb-5"},r.a.createElement("div",{className:"py-4 text-center"},r.a.createElement("h1",null,"Create Product")),r.a.createElement(pe.a,{className:"g-5"},r.a.createElement(Ne,{initialize:xe,onSubmit:c,formFor:"Create"})))},ke=t(342),Ce=(t(236),{count:1}),Oe=function(e,a){switch(a.type){case"INCREMENT":return e.count<99?{count:e.count+1}:{count:99};case"DECREMENT":return e.count>1?{count:e.count-1}:{count:1};case"RESET":return{count:1};default:throw new Error}},Se=function(){var e=Object(m.h)().pid,a=Object(n.useState)({}),t=Object(i.a)(a,2),l=t[0],c=t[1],s=Object(n.useState)({}),o=Object(i.a)(s,2),u=o[0],d=o[1],E=Object(n.useReducer)(Oe,Ce),b=Object(i.a)(E,2),f=b[0],v=b[1],h=Object(n.useContext)(P),g=(h.state,h.dispatch),N=Object(m.g)();Object(n.useEffect)(function(){!function(){var a=Object(Y.a)($.a.mark(function a(){var t;return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.get("/api/products/find/".concat(e));case 3:null===(t=a.sent)?N("/error"):(c(t.data),d(t.data.sku[0])),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),N("/error");case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(){return a.apply(this,arguments)}}()()},[e]);return l==={}||l.hasOwnProperty("sku")?r.a.createElement(p.a,{id:"product-container",className:"mt-3 px-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"product-img",className:"col-md-4 p-3"},r.a.createElement("img",{src:""!==u.img?u.img:"/img/no_image.svg",alt:u.itemName,className:"d-block mx-auto product-box-img"})),r.a.createElement("div",{id:"product-info",className:"col-md p-3"},r.a.createElement("h2",null,l.title),r.a.createElement("h4",{className:"text-secondary"},u.itemName),r.a.createElement("div",{id:"price-container",className:"px-2 mt-2 w-100 bg-warning"},u.discount>0?r.a.createElement("h3",null,r.a.createElement("del",{className:"me-2"},"$",u.price),"$",u.price*(100-u.discount)/100):r.a.createElement("h3",null,"$",u.price)),r.a.createElement("p",{className:"px-2 bg-dark text-white"},"In-stock: ",u.inStock>0?u.inStock:"Out of Stock"),""!==l.description&&r.a.createElement("p",{className:"desc-text py-1"},l.description),l.hasOwnProperty("sku")&&r.a.createElement("div",{id:"item-container",className:"my-4"},l.sku.map(function(e,a){return r.a.createElement("button",{className:"mx-3 item-btn p-0 btn btn-outline-danger",key:e._id,onClick:function(){return e=a,d(l.sku[e]),void v({type:"RESET"});var e}},r.a.createElement("img",{src:""!==e.img?e.img:"/img/no_image.svg",alt:e.itemName,className:"item-img"}))})),r.a.createElement("div",{id:"num-container"},r.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return v({type:"DECREMENT"})}},"-"),r.a.createElement("div",{id:"num-counter",className:"d-inline-block mx-2 text-center"},f.count),r.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return v({type:"INCREMENT"})}},"+"),r.a.createElement("span",{className:"mx-2"},u.unit||"Pieces")),r.a.createElement("button",{className:"btn btn-outline-primary my-2",onClick:function(){g({type:"CART_ADD_ITEM",payload:{_id:l._id,code:l.code,title:l.title,sku:u,quantity:f.count}})},disabled:u.inStock<f.count},"Add to Cart")))):r.a.createElement(ke.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))},Ie=(t(141),function(){var e=Object(m.h)().category,a=Object(n.useState)([]),t=Object(i.a)(a,2),l=t[0],c=t[1],o=Object(m.g)();return Object(n.useEffect)(function(){!function(){var a=Object(Y.a)($.a.mark(function a(){var t;return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.get("/api/products/?category=".concat(e[0].toUpperCase()+e.slice(1)));case 3:t=a.sent,c(t.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o("/error");case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(){return a.apply(this,arguments)}}()()},[e]),r.a.createElement("div",{id:"prod-container",className:"m-4 mx-auto"},l.map(function(e,a){return r.a.createElement(s.b,{to:"/product/item/".concat(e._id),key:e._id},r.a.createElement("div",{className:"border product-box"},r.a.createElement("img",{src:e.coverImg,alt:e.title,className:"product-img d-block mx-auto",loading:"lazy"}),r.a.createElement("p",{className:"fw-bold text-center p-1"},e.title)))}))}),je=function(){var e=Object(m.h)().keyword,a=Object(n.useState)([]),t=Object(i.a)(a,2),l=t[0],c=t[1],o=Object(m.g)();return Object(n.useEffect)(function(){!function(){var a=Object(Y.a)($.a.mark(function a(){var t;return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.get("/api/products/?title=".concat(e));case 3:t=a.sent,c(t.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o("/error");case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(){return a.apply(this,arguments)}}()()},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"mx-auto my-3"},"Search Result for: ",e),r.a.createElement("div",{id:"prod-container",className:"m-4 mx-auto"},l.map(function(e,a){return r.a.createElement(s.b,{to:"/product/item/".concat(e._id),key:e._id},r.a.createElement("div",{className:"border product-box"},r.a.createElement("img",{src:e.coverImg,alt:e.title,className:"product-img d-block mx-auto",loading:"lazy"}),r.a.createElement("p",{className:"fw-bold text-center p-1"},e.title)))})))},Pe=t(343),Be=t(351),Te=(t(239),function(){var e=Object(n.useContext)(P),a=e.state,t=e.dispatch,l=a.userInfo,c=a.cart.cartItems,o=Object(m.g)(),i=function(e,a){a>=1&&a<=99&&t({type:"CART_UPDATE_ITEM",payload:{key:e,newQuantity:a}})},u=c.reduce(function(e,a){return e+a.quantity*(a.sku.price*(100-a.sku.discount)/100)},0);return r.a.createElement(p.a,{id:"cart-container",className:"mt-3 mb-5 px-4"},r.a.createElement("div",{className:"py-4 text-center"},r.a.createElement("h1",null,"Cart")),r.a.createElement(pe.a,{className:"g-5"},r.a.createElement(Ee.a,{md:9},c.length>0&&r.a.createElement(pe.a,{className:"mb-2",id:"prod-header"},r.a.createElement("div",{className:"col-md-5 fw-bold"},"Product"),r.a.createElement("div",{className:"col-md-2 fw-bold text-center"},"Unit Price"),r.a.createElement("div",{className:"col-md-2 fw-bold text-center"},"Quantity"),r.a.createElement("div",{className:"col-md-2 fw-bold text-center"},"Sub-Total"),r.a.createElement("div",{className:"col-md-1 fw-bold text-center"})),0===c.length&&r.a.createElement(Pe.a,{variant:"info"},"Your cart is empty. "," ",r.a.createElement(s.b,{to:"/"},"Go Shopping")),c.map(function(e,a){return r.a.createElement(pe.a,{className:"border py-3 mb-3",key:a},r.a.createElement(Ee.a,{lg:5},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{sm:5,className:"text-center"},r.a.createElement("img",{src:""!==e.sku.img?e.sku.img:"/img/no_image.svg",alt:e.sku.itemName,className:"cart-prod-img"})),r.a.createElement(Ee.a,{sm:7},r.a.createElement("h5",{className:"fw-bold"},e.title),r.a.createElement("h6",{className:"text-secondary"},e.sku.itemName)))),r.a.createElement(Ee.a,{sm:!0,lg:2,className:"text-center py-2"},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:6,className:"desc-mobile"},r.a.createElement("strong",null,"Unit Price")),r.a.createElement(Ee.a,{xs:6,sm:12},e.sku.discount>0?r.a.createElement("del",null,"$".concat(e.sku.price)):"$".concat(e.sku.price)," ",r.a.createElement("br",null),e.sku.discount>0?"$".concat(e.sku.price*(100-e.sku.discount)/100):r.a.createElement("div",null)))),r.a.createElement(Ee.a,{sm:!0,lg:2,className:"text-center py-2"},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:6,className:"desc-mobile"},r.a.createElement("strong",null,"Quantity")),r.a.createElement(Ee.a,{xs:6,sm:12},r.a.createElement(E.a,{variant:"primary",size:"sm",onClick:function(){return i(a,e.quantity-1)}},"-"),r.a.createElement("div",{className:"d-inline-block mx-2 text-center num-box"},e.quantity),r.a.createElement(E.a,{variant:"primary",size:"sm",onClick:function(){return i(a,e.quantity+1)}},"+")))),r.a.createElement(Ee.a,{sm:!0,lg:2,className:"text-center py-2"},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:6,className:"desc-mobile"},r.a.createElement("strong",null,"Amount")),r.a.createElement(Ee.a,{xs:6,sm:12},"$",e.sku.price*(100-e.sku.discount)/100*e.quantity))),r.a.createElement(Ee.a,{lg:1,className:"text-center py-2"},r.a.createElement(E.a,{variant:"danger",size:"sm",className:"delete-btn",onClick:function(){return function(e){t({type:"CART_REMOVE_ITEM",payload:e})}(a)}},r.a.createElement(ve.a,{size:16}))))})),r.a.createElement(Ee.a,{md:3},r.a.createElement(pe.a,{className:"mb-3"},r.a.createElement(Be.a,{className:"p-2"},r.a.createElement("h2",null,"Items:"),r.a.createElement("h3",null,c.length),r.a.createElement("h2",null,"Total Price:"),r.a.createElement("h3",null,u))),r.a.createElement(pe.a,null,r.a.createElement(Be.a,{className:"p-2"},r.a.createElement(E.a,{variant:"primary",type:"submit",className:"w-100",disabled:0===c.length,onClick:function(){null===l&&alert("Please login first!"),o("/user/login?redirect=/checkout")}},"Checkout"))))))}),_e=t(344),Le=(t(241),X.d().shape({name:X.f().required("Your name is missing."),phone:X.f().matches(/^\d{8}$/,"Invalid Phone Number").required("Phone number is missing."),address:X.f().when("payment",{is:function(e){return"Cash"!==e},then:X.f().required("Shipping address is missing.")}),cardNumber:X.f().when("payment",{is:function(e){return"Credit Card"===e},then:X.f().matches(/^\d{4} \d{4} \d{4} \d{4}$/,"Invalid card number").required("Card number is missing.")}),cardHolder:X.f().when("payment",{is:function(e){return"Credit Card"===e},then:X.f().required("Card holder's name is missing.")}),expiryDate:X.b().when("payment",{is:function(e){return"Credit Card"===e},then:X.b().required("Expiry date is missing.")}),cvv:X.f().when("payment",{is:function(e){return"Credit Card"===e},then:X.f().length(3,"Invalid CVV").required("CVV number is missing.")}),notes:X.f().max(150,"Maximum 100 characters allowed.")})),Ae={name:"",phone:"",address:"",payment:"Cash",cardNumber:"",cardHolder:"",expiryDate:"",cvv:"",notes:""},Ge=function(){var e=Object(n.useContext)(P),a=e.state,t=e.dispatch,l=a.cart.cartItems,c=a.userInfo,o=Object(m.g)(),i=l.reduce(function(e,a){return e+a.quantity*(a.sku.price*(100-a.sku.discount)/100)},0),u=function(){var e=Object(Y.a)($.a.mark(function e(a){var n;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(I.a)({},a,{products:l,userInfo:{username:c.username,email:c.email,_id:c._id},total:i}),e.prev=1,e.next=4,ne.a.post("/api/orders",n,{headers:{token:"Bearer ".concat(c.accessToken)}});case 4:return e.sent.data,t({type:"CART_CLEAR"}),localStorage.removeItem("cartItems"),e.next=10,ne.a.put("/api/products",l,{params:{operation:"reduce",id:c._id},headers:{token:"Bearer ".concat(c.accessToken)}});case 10:e.sent,o("/success"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),alert(JSON.stringify(e.t0,null,2)),console.log(JSON.stringify(e.t0,null,2));case 18:case"end":return e.stop()}},e,null,[[1,14]])}));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"checkout-container",className:"mt-3 mb-5"},r.a.createElement("div",{className:"py-4 text-center"},r.a.createElement("h1",null,"Checkout")),r.a.createElement(pe.a,{className:"g-5"},r.a.createElement(Ee.a,{md:{span:4,order:"last"}},r.a.createElement("h4",{className:"d-flex justify-content-between align-items-center mb-3"},r.a.createElement("span",{className:"text-danger"},"Your cart"),r.a.createElement(b.a,{pill:!0,bg:"danger"},l.length)),r.a.createElement(k.a,{className:"mb-3"},l.map(function(e,a){return r.a.createElement(k.a.Item,{className:"d-flex justify-content-between lh-sm",key:a},r.a.createElement("div",null,r.a.createElement("h6",{className:"my-0"},e.title),r.a.createElement("small",{className:"text-muted"},"".concat(e.sku.itemName," (").concat(e.quantity,")"))),r.a.createElement("span",{className:"text-muted"},"$".concat(e.sku.price*(100-e.sku.discount)/100*e.quantity)))}),r.a.createElement(k.a.Item,{className:"d-flex justify-content-between"},r.a.createElement("span",null,"Total (HKD)"),r.a.createElement("strong",null,"$",i))),r.a.createElement(s.b,{to:"/cart",className:"float-end"},r.a.createElement(_e.a,{className:"me-2"}),"Back to cart")),r.a.createElement(Ee.a,{md:8},r.a.createElement(Q.b,{initialValues:Ae,validationSchema:Le,onSubmit:function(e){return u(e)}},function(e){var a=e.values,t=e.errors,n=e.touched,l=e.handleSubmit,c=e.handleChange,s=e.handleBlur,m=(e.resetForm,e.setFieldValue);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"mb-3"},"Billing address"),r.a.createElement(g.a,{id:"checkout-form",noValidate:!0,onSubmit:l},r.a.createElement(pe.a,{className:"g-3"},r.a.createElement(g.a.Group,{as:Ee.a,md:"7",controlId:"name"},r.a.createElement(g.a.Label,null,"Name"),r.a.createElement(g.a.Control,{type:"text",name:"name",value:a.name,onChange:c,onBlur:s,isInvalid:n.name&&!!t.name}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.name)),r.a.createElement(g.a.Group,{as:Ee.a,md:"5",controlId:"phone"},r.a.createElement(g.a.Label,null,"Phone Number"),r.a.createElement(W.a,null,r.a.createElement(W.a.Text,{id:"telCode"},"+852"),r.a.createElement(g.a.Control,{type:"tel",name:"phone",inputMode:"tel",maxLength:"8","aria-describedby":"telCode",value:a.phone.replace(/[^0-9]/g,""),onChange:c,onBlur:s,isInvalid:n.phone&&!!t.phone}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.phone))),r.a.createElement(g.a.Group,{as:Ee.a,md:"12",controlId:"address"},r.a.createElement(g.a.Label,null,"Address"),r.a.createElement(g.a.Control,{type:"text",name:"address",value:a.address,onChange:c,onBlur:s,isInvalid:n.address&&!!t.address}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.address))),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("h4",{className:"mb-3"},"Payment"),r.a.createElement("div",{role:"group","aria-labelledby":"payment-group",className:"my-3"},r.a.createElement(g.a.Check,{type:"radio",name:"payment",id:"cash",label:"Cash",value:"Cash",defaultChecked:!0,onChange:c,onClick:function(){m("cardNumber",""),m("cardHolder",""),m("expiryDate",""),m("cvv","")}}),r.a.createElement(g.a.Check,{type:"radio",name:"payment",id:"credit-card",label:"Credit Card",value:"Credit Card",onChange:c}),r.a.createElement(g.a.Check,{type:"radio",name:"payment",id:"bank-transfer",label:"Bank Transfer",value:"Bank Transfer",onChange:c})),r.a.createElement("div",{className:"Credit Card"!==a.payment?"mb-3":"mb-3 d-none"},r.a.createElement("strong",null,"Cash: "),"Pickup at store only",r.a.createElement("br",null),r.a.createElement("strong",null,"Pickup Location: ")," Unit 1, 1/F, ABC Building, Hong Kong, N.T.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"Bank Transfer: ")," Please transfer to the account",r.a.createElement("br",null),r.a.createElement("strong",null,"Bank Acc.: ")," 000-000-0-000000-0 (E-shop Company)",r.a.createElement("br",null)," ",r.a.createElement("br",null),"Once the transfer completed, please send the capture of transaction record to",r.a.createElement("br",null),r.a.createElement("strong",null,"Whatsapp: "),"+852 0000 0000",r.a.createElement("br",null),"Delivery will be arranged after the payment is confirmed."),r.a.createElement("div",{className:"Credit Card"===a.payment?"mb-3":"mb-3 d-none"},r.a.createElement(pe.a,{className:"g-3"},r.a.createElement(g.a.Group,{controlId:"card-no"},r.a.createElement(g.a.Label,null,"Credit Card Number"),r.a.createElement(g.a.Control,{type:"tel",name:"cardNumber",inputMode:"numeric",placeholder:"0000 0000 0000 0000",maxLength:"19",value:a.cardNumber.replace(/[^0-9]/g,"").replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim(),onChange:c,onBlur:s,isInvalid:n.cardNumber&&!!t.cardNumber}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.cardNumber)),r.a.createElement(g.a.Group,{controlId:"card-name"},r.a.createElement(g.a.Label,null,"Card Holder Name"),r.a.createElement(g.a.Control,{type:"text",name:"cardHolder",value:a.cardHolder,onChange:c,onBlur:s,isInvalid:n.cardHolder&&!!t.cardHolder}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.cardHolder)),r.a.createElement(g.a.Group,{as:Ee.a,md:"6",controlId:"expiry-date"},r.a.createElement(g.a.Label,null,"Expiry Date (YYYY-MM)"),r.a.createElement(g.a.Control,{type:"month",name:"expiryDate",placeholder:"YYYY/MM",max:"2099-12",pattern:"[0-9]{4}-[0-9]{2}",value:a.expiryDate,maxLength:"5",onChange:c,onBlur:s,isInvalid:n.expiryDate&&!!t.expiryDate}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.expiryDate)),r.a.createElement(g.a.Group,{as:Ee.a,md:"6",controlId:"cvv"},r.a.createElement(g.a.Label,null,"CVV"),r.a.createElement(g.a.Control,{type:"tel",inputMode:"numeric",name:"cvv",placeholder:"CVV",pattern:"\\d{3}",maxLength:"3",value:a.cvv.replace(/[^0-9]/g,"").replace(/\s/g,""),onChange:c,onBlur:s,isInvalid:n.cvv&&!!t.cvv}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},t.cvv)))),r.a.createElement(g.a.Group,{className:"mb-3",controlId:"checkout-notes"},r.a.createElement(g.a.Label,null,"Notes"),r.a.createElement(g.a.Control,{as:"textarea",rows:3,name:"notes",value:a.notes,onChange:c,isInvalid:!!t.notes,maxLength:"150"}),r.a.createElement(g.a.Text,{className:"text-secondary"},"Remaining Characters: ".concat(150-a.notes.length))),r.a.createElement(Be.a,{className:"p-2"},r.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit Order"))))})))))},De=t(345),Me=(t(142),function(e){switch(e){case"Pending":return"text-warning";case"Delivering":return"text-info";case"Completed":return"text-success";case"Cancelled":return"text-danger";default:return"text-black"}}),Fe=function(){var e=Object(n.useContext)(P),a=e.state,t=(e.dispatch,a.userInfo),l=Object(n.useState)({}),c=Object(i.a)(l,2),m=c[0],o=c[1],u=Object(n.useState)("1990-01-01"),d=Object(i.a)(u,2),b=d[0],f=d[1],v=Object(n.useState)((new Date).toISOString().split("T")[0]),h=Object(i.a)(v,2),N=h[0],y=h[1],x=Object(n.useState)(""),w=Object(i.a)(x,2),k=w[0],C=w[1],O=Object(n.useState)("Any"),S=Object(i.a)(O,2),I=S[0],j=S[1],B=Object(n.useState)("asc-time"),T=Object(i.a)(B,2),_=T[0],L=T[1],A=t.isAdmin?"/api/orders":"/api/orders/user/".concat(t._id);Object(n.useEffect)(function(){!function(){var e=Object(Y.a)($.a.mark(function e(){var a;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.get(A,{params:{user:t.isAdmin?k:t.username,startDate:b,endDate:N,sort:_,status:I,id:t._id},headers:{token:"Bearer ".concat(t.accessToken)}});case 3:a=e.sent,o(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}()()},[]);var G=function(){var e=Object(Y.a)($.a.mark(function e(a){var n;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,ne.a.get(A,{params:{user:t.isAdmin?k:t.username,startDate:b,endDate:N,sort:_,status:I,id:t._id},headers:{token:"Bearer ".concat(t.accessToken)}});case 4:n=e.sent,o(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(p.a,{id:"manage-order-container",className:"mt-4"},r.a.createElement("h1",{className:"text-center mb-3"},"Manage Order"),t.isAdmin&&r.a.createElement(pe.a,{className:"mx-1 mb-3"},r.a.createElement(g.a.Group,{as:Ee.a,className:"px-1"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"User"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Search User",value:k,onChange:function(e){C(e.target.value)}})))),r.a.createElement(pe.a,{className:"mx-1 mb-3"},r.a.createElement(g.a.Group,{as:Ee.a,xs:"12",sm:!0,md:!0,className:"px-1"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"Start"),r.a.createElement(g.a.Control,{type:"date",placeholder:"Start",value:b,onChange:function(e){f(e.target.value)}}))),r.a.createElement(g.a.Group,{as:Ee.a,xs:"12",sm:!0,md:!0,className:"px-1 mt-3 mt-sm-0"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"End"),r.a.createElement(g.a.Control,{type:"date",placeholder:"End",value:N,onChange:function(e){y(e.target.value)}}))),r.a.createElement(g.a.Group,{as:Ee.a,sm:"12",md:!0,className:"px-1 mt-3 mt-md-0"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"Status"),r.a.createElement(g.a.Select,{"aria-label":"Search Term",value:I,onChange:function(e){j(e.target.value)}},r.a.createElement("option",{value:"Any"},"Any"),r.a.createElement("option",{value:"Pending"},"Pending"),r.a.createElement("option",{value:"Delivering"},"Delivering"),r.a.createElement("option",{value:"Completed"},"Completed"),r.a.createElement("option",{value:"Cancelled"},"Cancelled"))))),r.a.createElement(pe.a,{className:"mx-1 mb-3"},r.a.createElement(g.a.Group,{as:Ee.a,sm:"9",className:"px-1"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"Sorting"),r.a.createElement(g.a.Select,{"aria-label":"Search Term",value:_,onChange:function(e){L(e.target.value)}},r.a.createElement("option",{value:"asc-time"},"Earliest Order First"),r.a.createElement("option",{value:"desc-time"},"Latest Order First"),r.a.createElement("option",{value:"desc-price"},"Greatest Order Total First"),r.a.createElement("option",{value:"asc-price"},"Smallest Order Total First")))),r.a.createElement(Ee.a,{sm:!0},r.a.createElement(E.a,{className:"w-100 mt-3 mt-sm-0",onClick:G},"Search"))),m.length>0&&m.map(function(e,a){return r.a.createElement(pe.a,{className:"border mb-3 mx-1 py-2",key:a},r.a.createElement("div",{className:"d-flex justify-content-between mb-2 flex-wrap"},r.a.createElement("u",null,"id: ".concat(e._id)),r.a.createElement("div",null,new Date(e.createdAt).toLocaleString("en-GB",{hour12:!1}))),r.a.createElement(pe.a,null,r.a.createElement(Ee.a,null,e.userInfo.username),r.a.createElement(Ee.a,{className:"text-center"},"$",e.total),r.a.createElement(Ee.a,{className:"text-end text-sm-center "},r.a.createElement("div",{className:Me(e.status)},e.status)),r.a.createElement(Ee.a,{xs:12,sm:!0},r.a.createElement(s.b,{to:"/order/".concat(e._id)},r.a.createElement(E.a,{size:"sm",variant:"secondary",className:"float-end view-order-btn"},r.a.createElement(De.a,{color:"white",size:16,className:"align-middle"}),r.a.createElement("span",{className:"px-1 fw-bold"},"View"))))))}))},Re=function(e){var a=e.products,t=e.total;return r.a.createElement(pe.a,null,r.a.createElement("h4",{className:"mb-2"},r.a.createElement("span",{className:"text-danger  me-3"},"Your cart"),r.a.createElement(b.a,{pill:!0,bg:"danger "},a.length)),r.a.createElement("div",{className:" d-none d-md-block pe-4"},r.a.createElement(pe.a,{className:"mb-2"},r.a.createElement("div",{className:"col-md fw-bold"},"Product"),r.a.createElement("div",{className:"col-md-2 fw-bold text-center"},"Unit Price"),r.a.createElement("div",{className:"col-md-2 fw-bold text-center"},"Quantity"),r.a.createElement("div",{className:"col-md-2 fw-bold text-center"},"Sub-Total"))),r.a.createElement(k.a,{className:"mb-3"},a.map(function(e,a){return r.a.createElement(k.a.Item,{className:"lh-sm",key:a},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{sm:12,md:!0},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:3,className:"text-start"},r.a.createElement("strong",null,e.code)),r.a.createElement(Ee.a,{xs:!0,className:"text-start"},r.a.createElement("strong",null,e.title),r.a.createElement("div",{className:"text-secondary"},e.sku.itemName)))),r.a.createElement(Ee.a,{sm:!0,md:2,className:"text-center py-2"},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:6,className:"d-block d-sm-none"},r.a.createElement("strong",null,"Unit Price")),r.a.createElement(Ee.a,{xs:6,sm:12},e.sku.discount>0?r.a.createElement("del",{className:"text-secondary"},"$".concat(e.sku.price)):"$".concat(e.sku.price)," ",r.a.createElement("br",null),e.sku.discount>0?"$".concat(e.sku.price*(100-e.sku.discount)/100):r.a.createElement("div",null)))),r.a.createElement(Ee.a,{sm:!0,md:2,className:"text-center py-2"},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:6,className:"d-block d-sm-none"},r.a.createElement("strong",null,"Quantity")),r.a.createElement(Ee.a,{xs:6,sm:12},r.a.createElement("div",{className:"d-inline-block mx-2 text-center num-box"},e.quantity)))),r.a.createElement(Ee.a,{sm:!0,md:2,className:"text-center py-2"},r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:6,className:"d-block d-sm-none"},r.a.createElement("strong",null,"Amount")),r.a.createElement(Ee.a,{xs:6,sm:12},"$",e.sku.price*(100-e.sku.discount)/100*e.quantity)))))}),r.a.createElement(k.a.Item,null,r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{xs:!0},r.a.createElement("span",null,"Total (HKD)")),r.a.createElement(Ee.a,{xs:6,sm:4,md:2,className:"text-center"},r.a.createElement("strong",null,"$",t))))))},qe=function(e){var a=e.orderInfo,t=e.date,n=e.isAdmin,l=e.onSubmit;return r.a.createElement(Q.b,{initialValues:a,onSubmit:function(e){l(e)}},function(e){var a=e.values,l=e.handleSubmit,c=e.handleChange;return r.a.createElement(g.a,{onSubmit:l},r.a.createElement(pe.a,{className:"mb-3"},r.a.createElement(g.a.Group,{as:Ee.a,md:!0,className:"mb-3 mb-md-0"},r.a.createElement(g.a.Label,null,"Username"),r.a.createElement(g.a.Control,{name:"userInfo.user",value:a.userInfo.username,readOnly:!0})),r.a.createElement(g.a.Group,{as:Ee.a,md:!0},r.a.createElement(g.a.Label,null,"Email"),r.a.createElement(g.a.Control,{name:"userInfo.email",value:a.userInfo.email,readOnly:!0}))),r.a.createElement(pe.a,{className:"mb-3"},r.a.createElement(g.a.Group,{as:Ee.a,md:"7",className:"mb-3 mb-md-0"},r.a.createElement(g.a.Label,null,"Name"),r.a.createElement(g.a.Control,{name:"name",value:a.name,readOnly:!0})),r.a.createElement(g.a.Group,{as:Ee.a,md:"5"},r.a.createElement(g.a.Label,null,"Phone Number"),r.a.createElement(W.a,null,r.a.createElement(W.a.Text,{id:"telCode"},"+852"),r.a.createElement(g.a.Control,{name:"phone",maxLength:"8",value:a.phone,readOnly:!0})))),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Address"),r.a.createElement(g.a.Control,{name:"address",value:a.address,readOnly:!0})),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(g.a.Group,{controlId:"payment",className:"mb-3"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,{id:"payment"},"Payment"),r.a.createElement(g.a.Control,{name:"payment",value:a.payment,readOnly:!0}))),"Credit Card"===a.payment&&r.a.createElement(pe.a,{className:"g-3 mb-3"},r.a.createElement(g.a.Group,{controlId:"card-no"},r.a.createElement(g.a.Label,null,"Credit Card Number"),r.a.createElement(g.a.Control,{type:"tel",name:"cardNumber",value:a.cardNumber,readOnly:!0})),r.a.createElement(g.a.Group,{controlId:"card-name"},r.a.createElement(g.a.Label,null,"Card Holder Name"),r.a.createElement(g.a.Control,{type:"text",name:"cardHolder",value:a.cardHolder,readOnly:!0})),r.a.createElement(g.a.Group,{as:Ee.a,md:"6",controlId:"expiry-date"},r.a.createElement(g.a.Label,null,"Expiry Date (YYYY-MM)"),r.a.createElement(g.a.Control,{type:"month",name:"expiryDate",value:(new Date).toISOString().slice(0,7),readOnly:!0})),r.a.createElement(g.a.Group,{as:Ee.a,md:"6",controlId:"cvv"},r.a.createElement(g.a.Label,null,"CVV"),r.a.createElement(g.a.Control,{type:"tel",inputMode:"numeric",name:"cvv",value:a.cvv,readOnly:!0}))),r.a.createElement("hr",{className:"my-4"}),a.notes.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Notes"),r.a.createElement(g.a.Control,{as:"textarea",name:"notes",value:a.notes,readOnly:!0,maxLength:"150"})),r.a.createElement("hr",{className:"my-4"})),(a.message.length>0||n)&&r.a.createElement(g.a.Group,{className:"mb-3",controlId:"checkout-notes"},r.a.createElement(g.a.Label,null,"Owner's Message (Max. 150 words)"),r.a.createElement(g.a.Control,{as:"textarea",rows:3,name:"message",value:a.message,onChange:c,readOnly:!n,maxLength:"150"})),r.a.createElement(pe.a,null,r.a.createElement(Ee.a,{md:7,className:"mb-3 mb-md-0"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"Submitted at"),r.a.createElement(g.a.Control,{type:"text",name:"createdAt",value:new Date(t),readOnly:!0}))),r.a.createElement(g.a.Group,{as:Ee.a,md:!0,className:"mb-3"},r.a.createElement(W.a,null,r.a.createElement(W.a.Text,null,"Status"),r.a.createElement(g.a.Select,{name:"status",value:a.status,disabled:!n,onChange:c},r.a.createElement("option",{value:"Pending"},"Pending"),r.a.createElement("option",{value:"Delivering"},"Delivering"),r.a.createElement("option",{value:"Completed"},"Completed"),r.a.createElement("option",{value:"Cancelled"},"Cancelled"))))),n&&r.a.createElement(E.a,{type:"submit",className:"w-100 my-3"},"Submit"))})},Ue=function(){var e=Object(m.h)().orderId,a=Object(n.useState)({}),t=Object(i.a)(a,2),l=t[0],c=t[1],o=Object(n.useContext)(P),u=o.state,d=(o.dispatch,u.userInfo);Object(n.useEffect)(function(){!function(){var a=Object(Y.a)($.a.mark(function a(){var t;return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.get("/api/orders/find/".concat(e),{params:{id:d._id},headers:{token:"Bearer ".concat(d.accessToken)}});case 3:t=a.sent,c(t.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(){return a.apply(this,arguments)}}()()},[e]);var E={id:l._id,userInfo:l.userInfo,name:l.name,phone:l.phone,address:l.address,payment:l.payment,cardNumber:l.cardNumber,cardHolder:l.cardHolder,expiryDate:l.expiryDate,cvv:l.cvv,notes:l.notes,total:l.total,status:l.status,message:l.message||""},b=function(){var a=Object(Y.a)($.a.mark(function a(t,n,r){return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.a.put("/api/orders/".concat(e),t,{headers:{token:"Bearer ".concat(d.accessToken)}});case 3:if(a.sent,"Cancelled"===E.status||"Cancelled"!==t.status){a.next=10;break}return a.next=7,ne.a.put("/api/products",l.products,{params:{operation:"add",id:d._id},headers:{token:"Bearer ".concat(d.accessToken)}});case 7:a.sent,a.next=14;break;case 10:if("Cancelled"!==E.status||"Cancelled"===t.status){a.next=14;break}return a.next=13,ne.a.put("/api/products",l.products,{params:{operation:"reduce",id:d._id},headers:{token:"Bearer ".concat(d.accessToken)}});case 13:a.sent;case 14:alert("Update Success"),window.location.reload(),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),console.log(a.t0);case 21:case"end":return a.stop()}},a,null,[[0,18]])}));return function(e,t,n){return a.apply(this,arguments)}}();return void 0!==l._id&&r.a.createElement(p.a,{id:"order-detail-container",className:"my-4 px-4"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h1",{className:"text-center"},"Order Details"),r.a.createElement(s.b,{to:"/order",className:"text-center mb-3"},r.a.createElement(_e.a,{className:"me-2"}),"Back to Order Page")),void 0!==l.products&&r.a.createElement(Re,{products:l.products,total:l.total}),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(qe,{orderInfo:E,date:l.createdAt,isAdmin:d.isAdmin,onSubmit:b,product:l.products}))},ze=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"d-flex flex-column min-vh-100"},r.a.createElement(A,null),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",element:r.a.createElement(o,null)}),r.a.createElement(m.b,{path:"/user/login",element:r.a.createElement(ce,null)}),r.a.createElement(m.b,{path:"/user/register",element:r.a.createElement(oe,null)}),r.a.createElement(m.b,{path:"/user/modify-password",element:r.a.createElement(de,null)}),r.a.createElement(m.b,{path:"/product/item/:pid",element:r.a.createElement(Se,null)}),r.a.createElement(m.b,{path:"/product/category/:category",element:r.a.createElement(Ie,null)}),r.a.createElement(m.b,{path:"/product/search/:keyword",element:r.a.createElement(je,null)}),r.a.createElement(m.b,{path:"/product/manage",element:r.a.createElement(he,null)}),r.a.createElement(m.b,{path:"/product/edit/:pid",element:r.a.createElement(ye,null)}),r.a.createElement(m.b,{path:"/product/create",element:r.a.createElement(we,null)}),r.a.createElement(m.b,{path:"/cart",element:r.a.createElement(Te,null)}),r.a.createElement(m.b,{path:"/checkout",element:r.a.createElement(Ge,null)}),r.a.createElement(m.b,{path:"/success",element:r.a.createElement(U,null)}),r.a.createElement(m.b,{path:"/error",element:r.a.createElement(H,null)}),r.a.createElement(m.b,{path:"/order",element:r.a.createElement(Fe,null)}),r.a.createElement(m.b,{path:"/order/:orderId",element:r.a.createElement(Ue,null)})),r.a.createElement("div",{className:"mt-auto"},r.a.createElement(R,null))))};t(244),t(246),t(248);c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null,r.a.createElement(ze,null))))},253:function(e,a,t){},255:function(e,a,t){},257:function(e,a,t){},259:function(e,a,t){}},[[147,2,1]]]);
//# sourceMappingURL=main.c73e22ad.chunk.js.map